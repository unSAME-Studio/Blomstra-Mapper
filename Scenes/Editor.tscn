[gd_scene load_steps=19 format=2]

[ext_resource path="res://Graphics/EditorTheme.tres" type="Theme" id=1]
[ext_resource path="res://Graphics/Font/EditorFontSmall.tres" type="DynamicFont" id=2]
[ext_resource path="res://Graphics/Font/EditorFontBig.tres" type="DynamicFont" id=3]
[ext_resource path="res://Graphics/PanelStyle.tres" type="StyleBox" id=4]
[ext_resource path="res://Graphics/Temp Icons/noun_Magic Wand_217366.png" type="Texture" id=5]
[ext_resource path="res://Graphics/Temp Icons/noun_Swipe Up_250138.png" type="Texture" id=6]
[ext_resource path="res://Graphics/Temp Icons/noun_hold_250190.png" type="Texture" id=7]
[ext_resource path="res://Graphics/Temp Icons/noun_tap_250133.png" type="Texture" id=8]
[ext_resource path="res://Graphics/Temp Icons/noun_Music_32986.png" type="Texture" id=9]
[ext_resource path="res://Graphics/Temp Icons/noun_Save_542998.png" type="Texture" id=10]
[ext_resource path="res://Graphics/Temp Icons/noun_cog_245085.png" type="Texture" id=11]
[ext_resource path="res://Scripts/Musics/MusicControls.gd" type="Script" id=12]
[ext_resource path="res://Scripts/UI/MusicUI.gd" type="Script" id=13]
[ext_resource path="res://Scripts/UI/PlayButton.gd" type="Script" id=14]
[ext_resource path="res://Scripts/UI/MessageBox.gd" type="Script" id=15]
[ext_resource path="res://Scripts/UI/BPM.gd" type="Script" id=16]

[sub_resource type="InputEventAction" id=1]
action = "music_playpause"

[sub_resource type="ShortCut" id=2]
shortcut = SubResource( 1 )

[node name="Editor" type="Node"]

[node name="Control" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MarginContainer" type="MarginContainer" parent="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_constants/margin_right = 5
custom_constants/margin_top = 5
custom_constants/margin_left = 5
custom_constants/margin_bottom = 5
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VBoxContainer" type="VBoxContainer" parent="Control/MarginContainer"]
margin_left = 5.0
margin_top = 5.0
margin_right = 1275.0
margin_bottom = 715.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ToolBar" type="Panel" parent="Control/MarginContainer/VBoxContainer"]
margin_right = 1270.0
margin_bottom = 50.0
rect_min_size = Vector2( 0, 50 )
custom_styles/panel = ExtResource( 4 )

[node name="MarginContainer" type="MarginContainer" parent="Control/MarginContainer/VBoxContainer/ToolBar"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_constants/margin_right = 80
custom_constants/margin_top = 5
custom_constants/margin_left = 80
custom_constants/margin_bottom = 5
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HBoxContainer" type="HBoxContainer" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer"]
margin_left = 80.0
margin_top = 5.0
margin_right = 1190.0
margin_bottom = 45.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="TapNote" type="Button" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_right = 40.0
margin_bottom = 40.0
rect_min_size = Vector2( 40, 40 )
size_flags_horizontal = 0
size_flags_vertical = 4
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
icon = ExtResource( 8 )
expand_icon = true

[node name="HoldNote" type="Button" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 44.0
margin_right = 84.0
margin_bottom = 40.0
rect_min_size = Vector2( 40, 40 )
size_flags_horizontal = 0
size_flags_vertical = 4
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
icon = ExtResource( 7 )
expand_icon = true

[node name="SlideNote" type="Button" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 88.0
margin_right = 128.0
margin_bottom = 40.0
rect_min_size = Vector2( 40, 40 )
size_flags_horizontal = 0
size_flags_vertical = 4
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
icon = ExtResource( 6 )
expand_icon = true

[node name="Effects" type="Button" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 132.0
margin_right = 172.0
margin_bottom = 40.0
rect_min_size = Vector2( 40, 40 )
size_flags_horizontal = 0
size_flags_vertical = 4
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
icon = ExtResource( 5 )
expand_icon = true

[node name="VSeparator" type="VSeparator" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 176.0
margin_right = 333.0
margin_bottom = 40.0
size_flags_horizontal = 3
theme = ExtResource( 1 )

[node name="Open" type="Button" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 337.0
margin_right = 377.0
margin_bottom = 40.0
rect_min_size = Vector2( 40, 40 )
size_flags_horizontal = 0
size_flags_vertical = 4
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
icon = ExtResource( 9 )
expand_icon = true

[node name="VSeparator2" type="VSeparator" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 381.0
margin_right = 538.0
margin_bottom = 40.0
size_flags_horizontal = 3
theme = ExtResource( 1 )

[node name="Load" type="Button" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 542.0
margin_right = 699.0
margin_bottom = 40.0
size_flags_horizontal = 7
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
text = "Load Map"

[node name="Save" type="Button" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 703.0
margin_right = 743.0
margin_bottom = 40.0
rect_min_size = Vector2( 40, 40 )
size_flags_horizontal = 0
size_flags_vertical = 4
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
icon = ExtResource( 10 )
expand_icon = true

[node name="Meta" type="Button" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 747.0
margin_right = 904.0
margin_bottom = 40.0
size_flags_horizontal = 7
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
text = "Edit Metadata"

[node name="VSeparator3" type="VSeparator" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 908.0
margin_right = 1065.0
margin_bottom = 40.0
size_flags_horizontal = 3
theme = ExtResource( 1 )

[node name="Settings" type="Button" parent="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer"]
margin_left = 1069.0
margin_right = 1109.0
margin_bottom = 40.0
rect_min_size = Vector2( 40, 40 )
size_flags_horizontal = 0
size_flags_vertical = 4
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
icon = ExtResource( 11 )
expand_icon = true

[node name="ViewportContainer" type="ViewportContainer" parent="Control/MarginContainer/VBoxContainer"]
margin_top = 54.0
margin_right = 1270.0
margin_bottom = 585.0
size_flags_horizontal = 3
size_flags_vertical = 3
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Viewport" type="Viewport" parent="Control/MarginContainer/VBoxContainer/ViewportContainer"]
handle_input_locally = false
disable_3d = true
render_target_update_mode = 3

[node name="PlaybackControls" type="Panel" parent="Control/MarginContainer/VBoxContainer"]
margin_top = 589.0
margin_right = 1270.0
margin_bottom = 671.0
rect_min_size = Vector2( 0, 82 )
custom_styles/panel = ExtResource( 4 )

[node name="MarginContainer" type="MarginContainer" parent="Control/MarginContainer/VBoxContainer/PlaybackControls"]
anchor_right = 1.0
anchor_bottom = 1.0
custom_constants/margin_right = 10
custom_constants/margin_top = 5
custom_constants/margin_left = 10
custom_constants/margin_bottom = 5
__meta__ = {
"_edit_use_anchors_": false
}

[node name="HBoxContainer" type="HBoxContainer" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer"]
margin_left = 10.0
margin_top = 5.0
margin_right = 1260.0
margin_bottom = 79.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Play" type="Button" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer"]
margin_top = 2.0
margin_right = 70.0
margin_bottom = 72.0
rect_min_size = Vector2( 70, 70 )
size_flags_horizontal = 4
size_flags_vertical = 4
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
shortcut_in_tooltip = false
shortcut = SubResource( 2 )
text = "Play"
script = ExtResource( 14 )

[node name="MusicUI" type="VBoxContainer" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer"]
margin_left = 74.0
margin_right = 850.0
margin_bottom = 74.0
size_flags_horizontal = 3
script = ExtResource( 13 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="SongName" type="Label" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/MusicUI"]
margin_right = 776.0
margin_bottom = 41.0
custom_fonts/font = ExtResource( 3 )
text = "No Music"

[node name="HBoxContainer" type="HBoxContainer" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/MusicUI"]
margin_top = 45.0
margin_right = 776.0
margin_bottom = 74.0
size_flags_vertical = 3
__meta__ = {
"_edit_use_anchors_": false
}

[node name="SongPosition" type="Label" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/MusicUI/HBoxContainer"]
margin_right = 52.0
margin_bottom = 29.0
size_flags_vertical = 6
custom_fonts/font = ExtResource( 2 )
custom_colors/font_color = Color( 0.521569, 0.521569, 0.521569, 1 )
text = "00:00"

[node name="SongDuration" type="Label" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/MusicUI/HBoxContainer"]
margin_left = 56.0
margin_right = 119.0
margin_bottom = 29.0
size_flags_vertical = 6
custom_fonts/font = ExtResource( 2 )
custom_colors/font_color = Color( 0.521569, 0.521569, 0.521569, 1 )
text = "/ 00:00"

[node name="TimeSlider" type="HSlider" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/MusicUI/HBoxContainer"]
margin_left = 123.0
margin_right = 776.0
margin_bottom = 20.0
rect_min_size = Vector2( 300, 20 )
size_flags_horizontal = 3
size_flags_vertical = 2
theme = ExtResource( 1 )
step = 0.001

[node name="VSeparator" type="VSeparator" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer"]
margin_left = 854.0
margin_right = 858.0
margin_bottom = 74.0
theme = ExtResource( 1 )

[node name="VBoxContainer" type="VBoxContainer" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer"]
margin_left = 862.0
margin_right = 1250.0
margin_bottom = 74.0

[node name="SongSettings" type="HBoxContainer" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer"]
margin_right = 388.0
margin_bottom = 35.0
size_flags_vertical = 3
__meta__ = {
"_edit_use_anchors_": false
}

[node name="LPBLabel" type="Label" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SongSettings"]
margin_top = 3.0
margin_right = 39.0
margin_bottom = 32.0
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
text = "LPB"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="LPB" type="SpinBox" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SongSettings"]
margin_left = 43.0
margin_top = 3.0
margin_right = 119.0
margin_bottom = 32.0
size_flags_horizontal = 4
size_flags_vertical = 4
theme = ExtResource( 1 )
min_value = 1.0
max_value = 15.0
value = 4.0
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="BPMLabel" type="Label" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SongSettings"]
margin_left = 123.0
margin_top = 3.0
margin_right = 168.0
margin_bottom = 32.0
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
text = "BPM"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="BPM" type="SpinBox" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SongSettings"]
margin_left = 172.0
margin_top = 3.0
margin_right = 248.0
margin_bottom = 32.0
size_flags_horizontal = 4
size_flags_vertical = 4
theme = ExtResource( 1 )
max_value = 200.0
value = 120.0
align = 1
script = ExtResource( 16 )
__meta__ = {
"_edit_use_anchors_": false
}

[node name="OffsetLabel" type="Label" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SongSettings"]
margin_left = 252.0
margin_top = 3.0
margin_right = 308.0
margin_bottom = 32.0
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
text = "Offset"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="StartOffset" type="SpinBox" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SongSettings"]
margin_left = 312.0
margin_top = 3.0
margin_right = 388.0
margin_bottom = 32.0
size_flags_horizontal = 4
size_flags_vertical = 4
theme = ExtResource( 1 )
max_value = 5000.0
align = 1
__meta__ = {
"_edit_use_anchors_": false
}

[node name="SliderControls" type="HBoxContainer" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer"]
margin_top = 39.0
margin_right = 388.0
margin_bottom = 74.0
size_flags_vertical = 3

[node name="VolumeLabel" type="Label" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SliderControls"]
margin_top = 3.0
margin_right = 66.0
margin_bottom = 32.0
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
text = "Volume"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="VolumeSlider" type="HSlider" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SliderControls"]
margin_left = 70.0
margin_right = 198.0
margin_bottom = 35.0
rect_min_size = Vector2( 70, 0 )
size_flags_horizontal = 3
size_flags_vertical = 3
max_value = 50.0
value = 25.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ZoomLabel" type="Label" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SliderControls"]
margin_left = 202.0
margin_top = 3.0
margin_right = 255.0
margin_bottom = 32.0
theme = ExtResource( 1 )
custom_fonts/font = ExtResource( 2 )
text = "Zoom"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="ZoomSlider" type="HSlider" parent="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SliderControls"]
margin_left = 259.0
margin_right = 388.0
margin_bottom = 35.0
rect_min_size = Vector2( 70, 0 )
size_flags_horizontal = 3
size_flags_vertical = 3
max_value = 1.0
step = 0.01
value = 0.5
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MarginContainer" type="MarginContainer" parent="Control/MarginContainer/VBoxContainer"]
margin_top = 675.0
margin_right = 1270.0
margin_bottom = 710.0
custom_constants/margin_right = 3
custom_constants/margin_top = 3
custom_constants/margin_left = 10
custom_constants/margin_bottom = 3
__meta__ = {
"_edit_use_anchors_": false
}

[node name="MessageBox" type="Label" parent="Control/MarginContainer/VBoxContainer/MarginContainer"]
margin_left = 10.0
margin_top = 3.0
margin_right = 1267.0
margin_bottom = 32.0
custom_fonts/font = ExtResource( 2 )
custom_colors/font_color = Color( 0.109804, 1, 0.607843, 1 )
text = "Blomstra Map Editor v 0.0.1"
script = ExtResource( 15 )

[node name="MusicLoader" type="CenterContainer" parent="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
mouse_filter = 2
__meta__ = {
"_edit_use_anchors_": false
}

[node name="FileDialog" type="FileDialog" parent="Control/MusicLoader"]
margin_left = 390.0
margin_top = 110.0
margin_right = 890.0
margin_bottom = 610.0
rect_min_size = Vector2( 500, 500 )
theme = ExtResource( 1 )
window_title = "Open a File"
mode = 0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="AudioStreamPlayer" type="AudioStreamPlayer" parent="."]
volume_db = -25.0
script = ExtResource( 12 )
[connection signal="button_down" from="Control/MarginContainer/VBoxContainer/ToolBar/MarginContainer/HBoxContainer/Open" to="AudioStreamPlayer" method="_on_Open_button_down"]
[connection signal="button_down" from="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/Play" to="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/Play" method="_on_Play_button_down"]
[connection signal="toggle_play_audio" from="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/Play" to="AudioStreamPlayer" method="_on_Play_toggle_play_audio"]
[connection signal="gui_input" from="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/MusicUI/HBoxContainer/TimeSlider" to="AudioStreamPlayer" method="_on_TimeSlider_gui_input"]
[connection signal="value_changed" from="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/MusicUI/HBoxContainer/TimeSlider" to="AudioStreamPlayer" method="_on_TimeSlider_value_changed"]
[connection signal="value_changed" from="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SongSettings/BPM" to="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SongSettings/BPM" method="_on_BPM_value_changed"]
[connection signal="value_changed" from="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/VBoxContainer/SliderControls/VolumeSlider" to="AudioStreamPlayer" method="_on_VolumeSlider_value_changed"]
[connection signal="file_selected" from="Control/MusicLoader/FileDialog" to="AudioStreamPlayer" method="_on_FileDialog_file_selected"]
[connection signal="update_song_meta" from="AudioStreamPlayer" to="Control/MarginContainer/VBoxContainer/MarginContainer/MessageBox" method="_on_AudioPlayer_update_song_meta"]
[connection signal="update_song_meta" from="AudioStreamPlayer" to="Control/MarginContainer/VBoxContainer/PlaybackControls/MarginContainer/HBoxContainer/MusicUI" method="_on_AudioPlayer_update_song_meta"]
